<main>
  <br>
  <section id="order-history">
      <div class="divWidth">
          <h2 class="text-dark">Bestell-Verlauf</h2>
      </div>
  </section>

  <br>

  <section id="today-orders-list">
      <div class="card text-begin divWidth">
          <div class="card-header d-flex justify-content-between align-items-center">
              <span class="text-dark">Heutige Bestellungen</span>
              <select class="form-select form-select-sm w-auto" [(ngModel)]="selectedSortOptionToday" (change)="sortOrders('today')">
                  <option value="asc">Aufsteigend</option>
                  <option value="desc">Absteigend</option>
              </select>
          </div>
          <div class="card-body divWidth">
              <ng-container *ngIf="todayOrders.length > 0; else noTodayOrders">
                  <table class="table table-bordered rounded table-sm">
                      <thead class="thead-dark">
                          <tr>
                              <th scope="col">Datum</th>
                              <th scope="col">Gericht</th>
                              <th scope="col">Veggie</th>
                              <th scope="col">Preis</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let order of todayOrders">
                              <td class="table-cell-center">{{ order.date | date: 'dd.MM.yyyy' }}</td>
                              <td class="table-cell-center">{{ order.dish.title }}</td>
                              <td class="table-cell-center">{{ order.veggie ? 'Ja' : 'Nein' }}</td>
                              <td class="table-cell-center">{{ order.dish.price | currency:'EUR' }}</td>
                          </tr>
                      </tbody>
                  </table>
                  <div class="mt-3 setMarginBottom">
                      <p>Gesamtpreis heutiger Bestellungen: <strong>{{ calculateTotalPrice(todayOrders) | currency:'EUR' }}</strong></p>
                  </div>
              </ng-container>
              <ng-template #noTodayOrders>
                  <p>Keine Bestellungen verfügbar</p>
              </ng-template>
          </div>
      </div>
  </section>

  <br>

  <section id="pending-orders-list">
      <div class="card text-begin divWidth">
          <div class="card-header d-flex justify-content-between align-items-center">
              <span class="text-dark">Ausstehende Bestellungen</span>
              <select class="form-select form-select-sm w-auto" [(ngModel)]="selectedSortOptionPending" (change)="sortOrders('pending')">
                  <option value="asc">Aufsteigend</option>
                  <option value="desc">Absteigend</option>
              </select>
          </div>
          <div class="card-body divWidth">
              <ng-container *ngIf="pendingOrders.length > 0; else noPendingOrders">
                  <table class="table table-bordered rounded table-sm">
                      <thead class="thead-dark">
                          <tr>
                              <th scope="col">Datum</th>
                              <th scope="col">Gericht</th>
                              <th scope="col">Veggie</th>
                              <th scope="col">Preis</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let order of pendingOrders">
                              <td class="table-cell-center">{{ order.date | date: 'dd.MM.yyyy' }}</td>
                              <td class="table-cell-center">{{ order.dish.title }}</td>
                              <td class="table-cell-center">{{ order.veggie ? 'Ja' : 'Nein' }}</td>
                              <td class="table-cell-center">{{ order.dish.price | currency:'EUR' }}</td>
                          </tr>
                      </tbody>
                  </table>
                  <div class="mt-3 setMarginBottom">
                      <p>Gesamtpreis ausstehender Bestellungen: <strong>{{ calculateTotalPrice(pendingOrders) | currency:'EUR' }}</strong></p>
                  </div>
              </ng-container>
              <ng-template #noPendingOrders>
                  <p>Keine Bestellungen verfügbar</p>
              </ng-template>
          </div>
      </div>
  </section>

  <br>

  <section id="past-orders-list">
      <div class="card text-begin divWidth">
          <div class="card-header d-flex justify-content-between align-items-center">
              <span class="text-dark">Vergangene Bestellungen</span>
              <select class="form-select form-select-sm w-auto" [(ngModel)]="selectedSortOptionPast" (change)="sortOrders('past')">
                  <option value="asc">Aufsteigend</option>
                  <option value="desc">Absteigend</option>
              </select>
          </div>
          <div class="card-body divWidth">
              <ng-container *ngIf="pastOrders.length > 0; else noPastOrders">
                  <table class="table table-bordered rounded table-sm">
                      <thead class="thead-dark">
                          <tr>
                              <th scope="col">Datum</th>
                              <th scope="col">Gericht</th>
                              <th scope="col">Veggie</th>
                              <th scope="col">Preis</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let order of pastOrders">
                              <td class="table-cell-center">{{ order.date | date: 'dd.MM.yyyy' }}</td>
                              <td class="table-cell-center">{{ order.dish.title }}</td>
                              <td class="table-cell-center">{{ order.veggie ? 'Ja' : 'Nein' }}</td>
                              <td class="table-cell-center">{{ order.dish.price | currency:'EUR' }}</td>
                          </tr>
                      </tbody>
                  </table>
                  <div class="mt-3 setMarginBottom">
                      <p>Gesamtpreis vergangener Bestellungen: <strong>{{ calculateTotalPrice(pastOrders) | currency:'EUR' }}</strong></p>
                  </div>
              </ng-container>
              <ng-template #noPastOrders>
                  <p>Keine Bestellungen verfügbar</p>
              </ng-template>
          </div>
      </div>
  </section>
</main>
